---
title: "Introducción a R para ciencia de datos"
subtitle: 'Undergraduate lesson'
author  : "Kyle Parrish"
date    : "Texas Tech</br>January 2025</br>Last update: `r Sys.Date()`"
output:
  xaringan::moon_reader:
    css: [default, hygge, my-css.css, rutgers-fonts]
    lib_dir: libs
    nature:
      countIncrementalSlides: true
      ratio: 16:9
---

```{r xaringanExtra-clipboard, echo=FALSE}
htmltools::tagList(
  xaringanExtra::use_clipboard(
    button_text = "<i class=\"fa fa-clipboard\"></i>",
    success_text = "<i class=\"fa fa-check\" style=\"color: #90BE6D\"></i>",
  ),
  rmarkdown::html_dependency_font_awesome()
)
```

```{r xaringan-themer, include=FALSE}
library(xaringanthemer)
style_duo_accent(
  # primary_color = "#345865",
  primary_color = "#B56B6F",
  secondary_color = "#2c8475",
  black_color = "#4242424",
  white_color = "#FFF",
  base_font_size = "25px",
  # text_font_family = "Jost",
  # text_font_url = "https://indestructibletype.com/fonts/Jost.css",
  header_font_google = google_font("Times New Roman", "400", "700"),
  header_font_weight = "400",
  inverse_header_color = "#eaeaea",
  title_slide_text_color = "black",
  text_slide_number_color = "#9a9a9a",
  text_bold_color = "#f79334",
  code_inline_color = "#B56B6F",
  code_highlight_color = "transparent",
  link_color = "#2c8475",
  table_row_even_background_color = lighten_color("#345865", 0.9),
  extra_fonts = list(
    google_font("Times New Roman", "400")
  ),
  colors = c(
    green = "#31b09e",
    "green-dark" = "#2c8475",
    highlight = "#87f9bb",
    purple = "#887ba3",
    pink = "#B56B6F",
    orange = "#f79334",
    red = "#dc322f",
    `blue-dark` = "#002b36",
    `text-dark` = "#202020",
    `text-darkish` = "#424242",
    `text-mild` = "#606060",
    `text-light` = "#9a9a9a",
    `text-lightest` = "#eaeaea"
  ),
  extra_css = list(
    ".remark-slide-content h3" = list(
      "margin-bottom" = 0, 
      "margin-top" = 0
    ),
    ".smallish, .smallish .remark-code-line" = list(`font-size` = "0.9em")
  )
)
xaringanExtra::use_xaringan_extra(c("tile_view", "animate_css", "tachyons", "share_again"))
xaringanExtra::use_extra_styles()
```


```{r components, include=FALSE}
slides_from_images <- function(
  path,
  regexp = NULL,
  class = "hide-count",
  background_size = "contain",
  background_position = "top left"
) {
  if (isTRUE(getOption("slide_image_placeholder", FALSE))) {
    return(glue::glue("Slides to be generated from [{path}]({path})"))
  }
  if (fs::is_dir(path)) {
    imgs <- fs::dir_ls(path, regexp = regexp, type = "file", recurse = FALSE)
  } else if (all(fs::is_file(path) && fs::file_exists(path))) {
    imgs <- path
  } else {
    stop("path must be a directory or a vector of images")
  }
  imgs <- fs::path_rel(imgs, ".")
  breaks <- rep("\n---\n", length(imgs))
  breaks[length(breaks)] <- ""

  txt <- glue::glue("
  class: {class}
  background-image: url('{imgs}')
  background-size: {background_size}
  background-position: {background_position}
  {breaks}
  ")

  paste(txt, sep = "", collapse = "")
}
options("slide_image_placeholder" = FALSE)
```


class: title-slide-section, middle
<br>
<br>
<br>
<br>
## La **ciencia de datos** (data science) es una disciplina fascinante que te permite convertir datos sin procesar (raw data) en entendimiento, comprensión y conocimiento.

---

# La clase de hoy

.large[
Aprenderemos el lenguaje de programación **R** 
]

--

.large[
El objetivo de hoy es ofrecer una **visión general** de qué es R y cómo puede ser útil.

Codificaremos juntos: no obstante, aquí tienes enlaces si quieres descargar más.
]

--

.large[
https://posit.co/downloads/ 

https://posit.cloud
]

--

.large[
El contenido de esta lección viene del libro: https://es.r4ds.hadley.nz/ 
]

---

# Introducción 

.large[
.pull-left[
La exploración de datos es el arte de .blue[mirar tus datos], .green[generar hipótesis rápidamente], .orange[testearlas].
]]

--

.pull-right[
```{r, echo=FALSE}
knitr::include_graphics(here::here("texas_tech", "ug_teaching", "images", "intro.png"))
```
]




---
class: title-slide-section, middle
<br>
<br>
<br>
<br>
## ¿Qué se puede aprender?

- **Importar**: Cargar datos desde archivos, bases de datos o APIs a R.
- **Ordenar**: Estructurar los datos de manera que cada columna sea una variable y cada fila una observación.
- **Transformar**: Filtrar observaciones, crear nuevas variables y calcular estadísticas resumidas.
- **Visualizar**: Crear gráficos que revelen patrones y tendencias en los datos.
- **Modelar**: Construir modelos matemáticos o computacionales para responder preguntas específicas.

Estas herramientas te proporcionarán una base sólida para enfrentar una variedad de desafíos en la ciencia de datos utilizando R.

---

# El tidyverse

.large[
- El **tidyverse** es un conjunto de paquetes en R diseñados para trabajar juntos de manera armoniosa.
  
- Cada paquete aborda una parte específica del flujo de trabajo de análisis de datos:
  - **dplyr**: Manipulación de datos.
  - **ggplot2**: Visualización de datos.
  - **tidyr**: Ordenamiento de datos.
  - **readr**: Importación de datos.
  - **purrr**: Programación funcional.
  - **tibble**: Estructura de datos moderna.
]

---

# ¿Qué es un paquete?

.large[
- En R, un **paquete** es una colección de funciones, datos, y documentación agrupados en una biblioteca.
  
- Los paquetes deben instalarse y luego cargarse antes de usarlos:
]

```{r{}
  # Instalar el paquete tidyverse
  install.packages("tidyverse")
  
  # Cargar el paquete tidyverse
  library(tidyverse)
```          

---

# Funciones en R

.large[
.pull-left[
Una **función** es un bloque de código diseñado para realizar una tarea específica.
]]

--

.large[
.pull-right[
Las funciones tienen .blue[sintaxis]:

El nombre de la función va antes paréntesis ().

Dentro de los paréntesis van los .red[argumentos].

Los argumentos controlan cómo se comporta la función. 
]

--

```{r}
# Una función básica: calcular la media
valores <- c(10, 20, 30, 40, 50)

# La función mean toma un argumento principal (x)
mean(valores)
```

---

# Ejemplo: Una función con más de un argumento

.large[
Veamos un ejemplo usando las funciones `mean()` y `rnorm()`, donde esta última tiene **tres argumentos**:
]

```{r}
# rnorm genera números aleatorios con distribución normal
valores <- rnorm(n = 100, mean = 5, sd = 2)

# mean calcula la media de esos valores
resultado <- mean(valores)

resultado # Devuelve la media cercana a 5
```

---

# ¿Qué hace `rnorm()`?  

.large[**La función `rnorm()` genera números aleatorios que siguen una distribución normal.**]  

### Argumentos principales:  
- `n`: Cantidad de números a generar.  
- `mean`: Valor medio o promedio de la distribución.  
- `sd`: Desviación estándar que determina la variabilidad.  

### Ejemplo:  
```{r}
valores <- rnorm(n = 5, mean = 2, sd = 1)
valores
```

---

# Guardar resultados en objetos  

.large[En R, puedes aplicar una función a datos y guardar el resultado en un objeto para reutilizarlo.]  

### Ejemplo básico:  
```{r}
# Genera 10 números aleatorios con media 5 y desviación estándar 2
valores <- rnorm(n = 10, mean = 5, sd = 2)

# Calcula la media y guarda el resultado en un objeto
media_valores <- mean(valores)

# Imprime el resultado
media_valores
```

--

# Preguntas  

1. Cómo se genera 100 números aleatorios con media 15 y desviación estándar 2?

2. Cómo guardamos el resultados a un objeto que se llama "chicken"?
---

# La vizualización de datos 


> “Un simple gráfico ha brindado más información a la mente del analista de datos que cualquier otro dispositivo”. — John Tukey

--

.large[Empezamos con **la vizualización**.]

---

# La vizualización de datos 

Vamos a visualizar los datos usando el paquete `ggplot2`.

```{r}
library(tidyverse)
# install.packages("datos")
library(datos)
```

---

# Los automóviles

.large[
.pull-left[
Usemos nuestro primer gráfico para responder una pregunta: .blue[¿los automóviles con motores grandes consumen más combustible que los automóviles con motores pequeños?] 
]]

--

.large[
.pull-right[
Usamos el data frame `millas` que se encuentra en el paquete `datos` (datos::millas). 
]]

---

# El data frame millas

.large[
Un **data frame** es una colección rectangular de variables (columnas) y observaciones (filas). 
]

--

.large[
El data frame `millas` contiene observaciones para 38 modelos de automóviles recopiladas.
]

```{r}
millas
```

---

# El data frame millas

.large[
Entre las variables de millas se encuentran:

.blue[`cilindrada`]: tamaño del motor del automóvil, en litros.

.green[`autopista`]: eficiencia del uso de combustible de un automóvil en carretera, en millas por galón.

Al recorrer la misma distancia, un automóvil de baja eficiencia consume más combustible que un automóvil de alta eficiencia.
]

---

# Usamos ggplot

.large[
.pull-left[
Para graficar millas, ejecuta este código para poner cilindrada en el eje `x` y autopista en el eje `y`:
]]

--

.large[
.pull-right[
```{r}
ggplot(data = millas) +
  geom_point(mapping = aes(x = cilindrada, y = autopista))
```
]]

---

# Usamos ggplot

.large[
.pull-left[
El gráfico muestra una .red[relación negativa] entre el tamaño del motor (cilindrada) y la eficiencia del combustible (autopista). 
]]

.pull-right[
```{r, echo = FALSE}
ggplot(data = millas) +
  geom_point(mapping = aes(x = cilindrada, y = autopista))
```
]

---

# Ejercicios

.pull-left[
- Ejecuta `ggplot(data = millas)`. ¿Qué observas?

- ¿Cuántas filas hay en millas? ¿Cuántas columnas?

- Hacemos un gráfico de dispersión (scatterplot) de clase versus traccion? ¿Por qué no es útil este gráfico?
]

---

# Ejercicios

```{r}
ggplot(data = millas)
```

---

# Ejercicios

```{r}
nrow(millas) # filas
ncol(millas) # columnas 
```

---

# Ejercicios

.large[
.pull-left[
```{r}
ggplot(data = millas) +
  geom_point(mapping = aes(x = clase, y = traccion))
```
]]

--

.large[
.pull-right[
.large[No es útil porque no muestra todos los puntos de dato].
]]

---

# Mapeos estéticos

.pull-left[
En el siguiente gráfico, un grupo de puntos (resaltados en rojo) parece quedar fuera de la tendencia lineal.

Estos automóviles tienen un kilometraje mayor de lo que esperaríamos. ¿Cómo puedes explicar estos vehículos?
]

--

.pull-right[
```{r, echo=FALSE}
knitr::include_graphics(here::here("texas_tech", "ug_teaching", "images", "autopista_red.png"))
```
]

---

# Mapeos estéticos

.pull-left[
Supongamos que estos automóviles son híbridos. 

Una forma de probar esta hipótesis es observando la variable que indica la `clase` de cada automóvil.
]


.pull-right[
```{r, echo=FALSE}
knitr::include_graphics(here::here("texas_tech", "ug_teaching", "images", "autopista_red.png"))
```
]

---

# Mapeos estéticos

Puedes agregar una tercera variable, como clase, a un diagrama de dispersión bidimensional asignándolo a un .green[parámetro estético].

--

Un **parámetro estético** (o estética) es una propiedad visual de los objetos de un gráfico.

--

Las estéticas incluye cosas como el tamaño, la forma o el color de tus puntos

---

# Mapeos estéticos

```{r}
ggplot(data = millas) +
  geom_point(mapping = aes(x = cilindrada, y = autopista, color = clase))
```

---

# Errores 

.large[
.pull-left[
Una gran parte de la codificación consiste en **corregir errores**.

Podemos ver aquí que los puntos se vuelven azules cuando no están con los otros elementos estéticos.

Cuando los elementos están dentro de `aes()`, se definen de acuerdo con los datos.
]]


.large[
.pull-right[
Aquí, el color **no transmite información sobre una variable**, sino que cambia la apariencia del gráfico.

```{r}
ggplot(data = millas) +
 geom_point(mapping = aes(x = cilindrada, y = autopista), color = "blue")
```
]]

---

# Ejercicios

.large[
¿Qué no va bien en este código? ¿Por qué hay puntos que no son azules?
]

--

```{r}
ggplot(data = millas) +
geom_point(mapping = aes(x = cilindrada, y = autopista, color = "blue"))
```

---

# Ejercicios

¿Qué variables en millas son categóricas? ¿Qué variables son continuas?

```{r}
?millas
```


---

## ¿Qué variables en millas son categóricas? ¿Qué variables son continuas?

.pull-left[
**Variables categóricas**

fabricante

modelo

transmision

traccion

combustible

clas
]

--

.pull-right[
**Variables continuas**

cilindrada

anio

cilindros

ciudad

autopista
]


---

#### Asigna una variable continua a color, size, y shape. ¿Cómo se comportan estas estéticas de manera diferente para variables categóricas y variables continuas?

```{r}
ggplot(data = millas) +
  geom_point(mapping = aes(x = cilindrada, y = autopista, color = cilindrada))
```

--

Los colores son de diferentes tonos.

---

#### ¿Qué ocurre si asignas o mapeas la misma variable a múltiples estéticas?

```{r}
ggplot(data = millas) +
  geom_point(mapping = aes(x = cilindrada, y = cilindrada, color = cilindrada))
```

Tenemos una linea recta.

---

---

# Conclusión

.large[
- Hemos explorado **R** como una herramienta poderosa para la ciencia de datos.
]

--

.large[
- Aprendimos sobre:
  - La **visualización de datos** usando `ggplot2`.
  - El uso del **tidyverse** para transformar y analizar datos.
  - Cómo funcionan los **paquetes** y las **funciones** en R.
]

--

.large[
- Recuerda:
  - La ciencia de datos es un proceso iterativo: **Explora, visualiza, transforma y repite.**
  - Usa los recursos como [R para Ciencia de Datos](https://es.r4ds.hadley.nz/) para seguir aprendiendo.
]

--

## ¡Gracias por tu atención!
